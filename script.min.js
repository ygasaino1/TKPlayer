let f=null;let a=document.querySelector("#video-iframe");let C=a.cloneNode();let s=document.querySelector("#vid-container");let k=document.querySelector("#twitch-container");let c=null;let j=document.querySelector("#back-container");let t=document.querySelector("#back-iframe");let i=document.querySelector("audio");let d;let p=null;let u="";let l=document.querySelector("#console-input");let n=document.querySelector("#console");let o=document.querySelector("#console-flex");let q="#ffd3dc";let r="#00b1ff";let e;let z=1e3;let m=100;let Y=.8;let h=false;function y(e,t=q){let i=b(`<div class="console" style="color: ${t}">${e}</div>`);l.appendChild(i);while(n.scrollHeight>n.clientHeight&&l.childNodes.length>2){l.childNodes[1].remove()}}function w(){n.style.zIndex=m;if(!h){clearTimeout(e);e=setTimeout(()=>{n.style.zIndex="0"},z)}}function b(e){var t=document.createElement("template");e=e.trim();t.innerHTML=e;return t.content.firstChild}String.prototype.replaceAt=function(e,t){return this.substring(0,e)+t+this.substring(e+1)};function M(){let t=/\/video\/(\w+)|bvid=(\w+)/i;let i=decodeURI(p.href);let e="";let l="";if(t.test(i)){let e=i.match(t);l=e[1]||e[2]||""}let n=parseInt(p.searchParams.get("t"))||parseInt(p.searchParams.get("time"))||0;if("t"in N.param){n+=parseInt(N.param["t"])||0}e=`https://player.bilibili.com/player.html?&bvid=${l}&page=1&autoplay=1&t=${n}`;Q(e)}function Q(e){a.setAttribute("src",e)}function W(){let t=/\/([\w-]+)\/([\w-]+)\/?$/i;let i=decodeURI(p.href);let e="";let l="";let n="";if(t.test(i)){let e=i.match(t);if(e.length>=3){if(e[1].toLowerCase()=="live"){l=e[2]||""}else{l=e[1]||"";n=e[2]||""}}else{O()}}let o=parseInt(p.searchParams.get("t"))||parseInt(p.searchParams.get("time"))||0;if("t"in N.param){o+=parseInt(N.param["t"])||0}if(l&&n){e=`https://www.mixcloud.com/widget/iframe/?feed=/${l}/${n}/`;a.setAttribute("src",e);if(!g){g=F()}g.then(()=>{f=Mixcloud.PlayerWidget(document.getElementById("video-iframe"));f.ready.then(function(){f.events.ended.on(()=>{if(D.length>0||!("loop"in N.param)){V()}else{f.seek(0);f.play()}});B(o)})})}else{O()}}function B(e){f.play();f.setOption("hide_cover",true);if(e!=0){f.seek(e)}}let g=null;function F(){return new Promise((e,t)=>{let i=document.createElement("script");i.id="mixcloud-script";i.src="https://widget.mixcloud.com/media/js/widgetApi.js";i.async=true;i.onload=()=>{e()};let l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(i,l);y("___ Mixcloud Initialization...")})}function H(){let e=decodeURI(p.href);let t=`https://w.soundcloud.com/player/?url=${e}&color=%23ff5500&auto_play=true&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true`;J(t)}function J(e){a.setAttribute("src",e)}function G(){f=null;let t=/^.*www\.twitch\.tv\/([^\?\/]+)$|.*\/\?channel=([^&]*)/i;let i=/.*\/\?video=(\w+)|.*\/videos\/([^?]*)/i;let l=/.*collection=(\w+)/i;let n=decodeURI(p.href);let e="";let o="";let a="";let r="";if(t.test(n)){let e=n.match(t);o=e[1]||e[2]||""}if(i.test(n)){let e=n.match(i);a=e[1]||e[2]||""}if(l.test(n)){let e=n.match(l);r=e[1]||""}e=`https://player.twitch.tv/?parent=${d.hostname}&autoplay=true`;if(o!=""){e+=`&channel=${o}`}if(a!=""){e+=`&video=${a}`}if(r!=""){e+=`&collection=${r}`}let s=0;let c=p.searchParams.get("t")||p.searchParams.get("time")||"";if(/^.*\D.*$/.test(c)){let e=c.match(/(\d*h)?(\d*m)?(\d*s)/i);s+=parseInt(e[1])*3600||0;s+=parseInt(e[2])*60||0;s+=parseInt(e[3])||0}else{s=parseInt(c)||0}if("t"in N.param){s+=parseInt(N.param["t"])||0}e+=`&time=${s}`;let u={autoplay:true,width:"100%",height:"100%"};if(o!=""){u.channel=o}else if(a!=""){u.video=a}else if(r!=""){u.collection=r}if(s!=0){u.time=`${s}`}f=new Twitch.Player("twitch-container",u);f.addEventListener(Twitch.Player.VIDEO_PLAY,v);f.addEventListener(Twitch.Player.ENDED,K)}function v(){f.removeEventListener(Twitch.Player.VIDEO_PLAY,v);if(!("max"in N.param)){return}let e="twitch: Setting quality...";y(e);let t="Auto";e=`${f.getQualities().length} Qualities Present`;y(e);if(f.getQualities().length>1){e=`${f.getQualities()[1].group}`;y("quality: "+e);f.setQuality(e)}}function K(){V()}function X(){let e="";video_reg=/\/(\w+)[^\/]*$/i;let t=decodeURI(p.href);let i="";if(video_reg.test(t)){let e=t.match(video_reg);i=e[1]||e[2]||""}if("loop"in N.param){e=`https://player.vimeo.com/video/${i}?autoplay=1&loop=1&autopause=0`}else{e=`https://player.vimeo.com/video/${i}?autoplay=1`}Z(e)}function Z(e){a.setAttribute("src",e)}function ee(){let e=decodeURI(p.href);let t="";te(t)}function te(e){a.setAttribute("src",e)}let ie=`AIzaSyASq2_wSS45nCkxTy71WW5CKAhPzRn6pHU`;let I=null;let le=["playVideo()","pauseVideo()","stopVideo()","clearVideo()","nextVideo()","previousVideo()","mute()","unMute()","setVolume(vol)","seekTo(time)","setPlaybackRate(rate)","showVideoInfo()","hideVideoInfo()"];function ne(e){e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/|\/shorts\/)/);return e[2]!==undefined?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]}let E=-1;function oe(){let l=decodeURI(p.href);let n="";let e="";let o="";if("list"in N.param||p.pathname.toLowerCase().includes("videoseries")||p.pathname.toLowerCase().includes("playlist")){if(!l.includes("list=LL")&&!l.toLowerCase().includes("start_radio=1")){if(p.searchParams.has("playlist")){e=p.searchParams.get("playlist")}if(p.searchParams.has("list")){e=p.searchParams.get("list")}if("loop"in N.param){n=`https://www.youtube.com/embed/videoseries?list=${e}&enablejsapi=1&controls=0&loop=1&`}else{n=`https://www.youtube.com/embed/videoseries?list=${e}&enablejsapi=1&controls=0&`}}}else if(e==""){o=ne(l);let e=parseInt(p.searchParams.get("t"))||parseInt(p.searchParams.get("time"))||0;if("t"in N.param){e+=parseInt(N.param["t"])||0}E=-1;let t=e;let i=-1;if("crop"in N.param){let e=N.param["crop"].split("-");try{E=Number(e[0]);t+=Number(e[0])}catch(e){y(e)}try{if(e.length>1){i=Number(e[1])}}catch(e){y(e)}}n=`https://www.youtube.com/embed/${o}?enablejsapi=1&controls=0&start=${t}`;if(i!=-1){n+=`&end=${i}`}}if("mute"in N.param){n+="&mute=1"}I=N.param;ae(n)}function ae(e){a.setAttribute("src",e);if(!R){L()}}let R=false;function L(){let e=document.createElement("script");e.id="iframe-demo";e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);R=true}function onYouTubeIframeAPIReady(){let e={events:{onReady:re,onStateChange:se}};f=new YT.Player("video-iframe",e)}function re(e){f.playVideo();ce();ue()}if(a.getAttribute("src")!="no-source"){L()}let U=[0,0,0];function se(e){U.unshift(e.data);U.pop();if(U[0]==YT.PlayerState.PLAYING&&U[1]==YT.PlayerState.BUFFERING&&U[2]==YT.PlayerState.UNSTARTED){t()}if(e.data==YT.PlayerState.ENDED&&D.length>0){V()}else if(e.data==YT.PlayerState.ENDED&&"loop"in I&&!("list"in I)){f.playVideo();if(E!=-1){f.seekTo(E)}}else if(e.data==YT.PlayerState.ENDED){V()}function t(){let e=f.videoTitle;document.title=e;y(`___ [${e}]`);y(`___ [${f.getDuration()}]`)}}function ce(){let i=null;Object.keys(N.param).forEach(e=>{let t=e.match(/^(\d+\.?\d*)x$/i);if(t&&t.length>1){i=Number(t[1])}});if(i){f.setPlaybackRate(i)}}function ue(){let i=null;let e=false;Object.keys(N.param).forEach(e=>{let t=e.match(/^(\d+\.?\d*)v$/i);if(t&&t.length>1){i=Number(t[1])}});if(i){if(i<0){i=0}if(i>100){i=100}f.setVolume(i)}}function fe(){let t=decodeURI(p.href);let e="";let i="";radio_reg=/\/(\w+)\/?$/i;if(radio_reg.test(t)){let e=t.match(radio_reg);i=e[1]||""}e=`https://zeno.fm/player/${i}`;de(e)}function de(e){a.setAttribute("src",e)}function pe(o){let a=7e3;let e=1;if(o.toLowerCase().startsWith("waa",5)){e=3;o=o.replace(o.substring(5,9),"")}for(let n=0;n<e;n++){let e=$(`<p id="back">${o}</p>`);let t=$(`<p id="front">${o}</p>`);let i=Math.random()*(window.innerHeight-200);let l=0;if(n>0){l=Math.random()*1e3}e.css("position","absolute");e.css("left",window.innerWidth+l);e.css("top",i);e.css("white-space","pre");t.css("position","absolute");t.css("left",window.innerWidth+l);t.css("top",i);t.css("white-space","pre");e.appendTo("body");t.appendTo("body");e.animate({left:e.width()*-1},a,"linear",function(){e.remove()});t.animate({left:t.width()*-1},a,"linear",function(){t.remove()})}}function O(){let e=decodeURI(p.href);me(e)}function me(e){window.location.href=e}function he(){let e=decodeURI(p.href);ye(e)}function ye(e){u="Radio Loading...";y(u);i.setAttribute("src",e);i.play()}f=null;function we(){let l=decodeURI(p.href);let e=`<video-js id="my-video" class="video-js" style="position: absolute; top:0; left:0; height:100%; width:100%" autoplay preload="auto"></video-js>`;c=b(e);s.appendChild(c);u="Video Loading...";y(u);f=videojs(document.querySelector("#my-video"));let t={m3u8:"application/x-mpegURL",mp4:"video/mp4",webm:"video/webm",ogv:"video/ogg"};let n=l;let i="";let o="";let a=false;Object.keys(t).forEach(e=>{if(!a&&n.toLowerCase().includes(e)){i=e;a=true}});let r=false;Object.keys(t).forEach(e=>{if(!r&&e in N.param){i=e;r=true}});if(i in t){o=t[i];f.ready(function(){y(`___ [${o}]`);let e={type:o,src:n};f.src(e);let t=new URL(l);let i=parseInt(t.searchParams.get("t"))||parseInt(t.searchParams.get("time"))||0;if("t"in N.param){i+=parseInt(N.param["t"])||0}this.currentTime(i)})}f.on("ended",function(){videojs.log("Awww...over so soon?!");c.remove();c=null;V()})}let be="https://prrr-001.glitch.me/";let ge=window.location.href;let ve="";let S=0;d=new URL(location);let P={};let _={youtube:/(.*youtube\..*)|(.*youtu\.be.*)/i,twitch:/.*\.twitch\..*/i,vimeo:/.*vimeo\.\w+\//i,soundcloud:/\w*.?soundcloud\.\w+/i,bilibili:/\.bilibili\./i,zeno:/zeno/i,mixcloud:/\.mixcloud\./i,video:/\.mp4|\.m3u8|\.webm|\.ogv/i};let x={radio:he};function Ie(){let e=N.body;u=`...REQUEST`;if(N.id!=""){u+=`@${N.id}`}y(u);try{p=null;if(e=="off"){e=ge;p=new URL(e);y(`URL off`)}else if(e=="homepage"){e=be;p=new URL(e);y(`URL homepage`)}else{p=new URL(e);if(p.host==location.host||"-"in N.param){u=`URL [*][*][*][*][*] -{___}`}else{u=`URL [${p.protocol}//][${p.host}][${p.pathname}][${p.search}][${p.hash}] -${JSON.stringify(N.param)}`}y(u)}$e();w()}catch(e){if(p==null){y(`URL ${N.body} -${JSON.stringify(N.param)}`,r)}y(e,r);y("...URL Failed",r);w()}}function $e(){if(["radio"].some(e=>e in N.param)){A("NOVIDEO");Ee("NOVIDEO");Re("NOVIDEO");Ue()}else{A("VIDEO");Ee("VIDEO");Re("VIDEO");Le()}}function A(e){if(S>0&&!("noreload"in N.param)){window.location.reload()}if(e=="VIDEO"){S+=1}}function Ee(e){if(e=="VIDEO"){{if(c!=null){c.remove();c=null}a.setAttribute("src","")}if(!("mute"in N.param)){i.setAttribute("src","")}}else if(e=="NOVIDEO"){i.setAttribute("src","")}}function Re(e){if("debug"in N.param){n.style.zIndex=m}else{n.style.zIndex=0}if(e=="VIDEO"){o.style.backgroundColor=`rgb(0,0,0,${Y})`;t.setAttribute("src","")}else if(e=="NOVIDEO"){o.style.backgroundColor=`rgb(0,0,0,0.0)`;t.setAttribute("src","flow\\index.html")}}function Le(){let e=Object.keys(P).filter(e=>e in N.param)[0];if(e!=undefined){P[e]()}else if(_["youtube"].test(p.host)){oe()}else if(_["twitch"].test(p.host)){G()}else if(_["vimeo"].test(p.host)){X()}else if(_["soundcloud"].test(p.host)){H()}else if(_["bilibili"].test(p.host)){M()}else if(_["zeno"].test(decodeURI(p.host))){fe()}else if(_["mixcloud"].test(decodeURI(p.host))){W()}else if(_["video"].test(decodeURI(p.href))){we()}else{O()}}function Ue(){let e=Object.keys(x).filter(e=>e in N.param)[0];if(e!=undefined){x[e]()}}function Oe(){if(n.style.zIndex=="0"){h=true;n.style.zIndex=m}else{h=false;n.style.zIndex="0"}}window.addEventListener("hashchange",()=>{T(false)});let N={func:"default",body:"",param:{},id:"",extra:{}};function Se(){let e=false;let t;let i;return e}function Pe(e){try{new URL(e);return true}catch(e){return false}}async function _e(e){let t=false;let i=e.env.blockurl;if(!i){return false}if(!Pe(i)){return false}let l=e.id??"";let n=e.body??"";if(n==null||undefined||""){n=""}else{if(!n.startsWith("http://")&&!n.startsWith("https://")){n="https://"+n}n=decodeURI(n);n=new URL(n).href}const o=e=>{const t=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\/?$/,"/?").toLowerCase();return new RegExp(`^${t}$`)};try{const a=await fetch(i);const r=await a.text();const s=r.split("\n");const c={url:[],user:[]};s.forEach(e=>{const[t,i]=e.split(":");if(t.trim()==="USER"){c.user.push(new RegExp(`^${i.trim().toLowerCase()}$`))}else if(t.trim()==="URL"){c.url.push(o(i.trim()))}});t=c.user.some(e=>{return e.test(l.toLowerCase())})||c.url.some(e=>{return e.test(n)})}catch(e){console.error("Error fetching or parsing data:",e)}if(t){}else{}return t}async function T(e){if(e==false&&await xe()==false){history.pushState(null,null," ");return}if(N.func=="comment"){pe(N.body)}else if(N.func=="debug"){Oe()}else if(N.func=="default"){if("que"in N.param){Ae()}else if("cmd"in N.param){Ne()}else if("help"in N.param){De()}else{Ie()}}history.pushState(null,null," ")}async function xe(){let n=decodeURI(location.hash).substring(1);try{let t={};try{t=JSON.parse(n)}catch{}let i={overparam:{},func:"default",body:"",param:{},id:"",extra:{},env:{}};let l=["blockurl"];Object.keys(t).forEach(e=>{if(!l.includes(e.toLowerCase())&&e in i&&t[e]!=null){i[e]=t[e]}});Object.keys(i.overparam).forEach(e=>{if(l.includes(e.toLowerCase())){i.env[e]=i.overparam[e]}else{i.param[e]=i.overparam[e]}});delete i.overparam;let e=await _e(i);if(e){history.pushState(null,null," ");return false}else{N=i;return true}}catch(e){return false}}let D=[];function Ae(){delete N.param.que;N.param["noreload"]=null;D.push(N);u=`...QUE-REQUEST`;if(N.id!=""){u+=`@${N.id}`}y(u);w()}function V(){if(D.length>0){N=D.shift();T(true)}else{if(c!=null){c.remove();c=null}a.parentElement.replaceChild(C,a)}}function Ne(){u=`...CMD-REQUEST`;if(N.id!=""){u+=`@${N.id}`}y(u);N.body=Te(N.body);try{let e=`"use strict";player.${N.body};`;Function(e)();y(`CMD player.${N.body}`);w()}catch(e){y(e,r);y("...CMD Failed",r);w()}}function Te(i){i=i.replace(/[;\.\s]/g,"");i=i.substring(0,i.indexOf(")")==-1?i.length:i.indexOf(")")+1);let l=-1;while((l=i.indexOf(",",l+1))!=-1){let e=i.indexOf(")",l);if(e==-1){i=i.replaceAt(l,"");continue}let t=i.indexOf("(",l);if(t!=-1&&t<e){i=i.replaceAt(l,"");continue}if(t==-1&&i.indexOf("(",0)==-1){i=i.replaceAt(l,"");continue}}return i}function De(){if(N.body.toLowerCase()=="youtube"){y(JSON.stringify(le,null,1));w()}}a.style.visibility="visible";s.style.visibility="visible";T(false);